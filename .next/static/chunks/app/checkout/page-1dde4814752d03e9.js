(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{9027:(e,t,r)=>{Promise.resolve().then(r.bind(r,2949))},2949:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(7437),a=r(9343),i=r(537),m=r(1014),d=r(2200),l=r(6463);let o=i.Ry({name:i.Z_().min(3,"El nombre debe tener al menos 3 caracteres"),email:i.Z_().email("Correo inv\xe1lido"),address:i.Z_().min(5,"Direcci\xf3n demasiado corta")});function n(){let{register:e,handleSubmit:t,formState:{errors:r}}=(0,a.cI)({resolver:(0,m.F)(o)}),i=(0,d.x)(e=>e.items),n=i.reduce((e,t)=>e+t.price*t.quantity,0),c=(0,d.x)(e=>e.clearCart),x=(0,l.useRouter)();async function u(e){try{let t=await fetch("".concat("/api","/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:e,items:i,total:n})}),r=await t.json();if(!t.ok)throw Error(r.error||"Error creando la orden");c(),x.push("/orders")}catch(e){alert(e.message||"Error desconocido")}}return(0,s.jsxs)("form",{onSubmit:t(u),className:"bg-white p-6 rounded-lg shadow-md space-y-5 max-w-lg mx-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Datos de env\xedo"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,s.jsx)("input",{...e("name"),className:"w-full border border-gray-300 rounded px-3 py-2 mt-1"}),r.name&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:r.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{...e("email"),type:"email",className:"w-full border border-gray-300 rounded px-3 py-2 mt-1"}),r.email&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:r.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Direcci\xf3n"}),(0,s.jsx)("input",{...e("address"),className:"w-full border border-gray-300 rounded px-3 py-2 mt-1"}),r.address&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:r.address.message})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["Total: $",n.toFixed(2)]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 transition text-white px-5 py-2 rounded-lg",children:"Confirmar compra"})]})]})}},2200:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var s=r(9099),a=r(9291);let i=(0,s.Ue)()((0,a.tJ)((e,t)=>({items:[],addItem:t=>e(e=>e.items.find(e=>e.id===t.id)?{items:e.items.map(e=>e.id===t.id?{...e,quantity:e.quantity+t.quantity}:e)}:{items:[...e.items,t]}),updateItem:(t,r)=>e(e=>({items:e.items.map(e=>e.id===t?{...e,quantity:r}:e)})),removeItem:t=>e(e=>({items:e.items.filter(e=>e.id!==t)})),clearCart:()=>e({items:[]}),total:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0)}),{name:"min-commerce-cart",storage:(0,a.FL)(()=>localStorage)}))}},e=>{var t=t=>e(e.s=t);e.O(0,[151,439,130,215,744],()=>t(9027)),_N_E=e.O()}]);